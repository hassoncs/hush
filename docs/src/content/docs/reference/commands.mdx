---
title: Commands
description: Complete reference for all Hush CLI commands.
---

import { Tabs, TabItem, Aside } from '@astrojs/starlight/components';

## Overview

```bash
hush <command> [options]
```

Hush keeps secrets **encrypted at rest**. The primary way to use secrets is `hush run -- <command>`, which decrypts to memory and injects environment variables‚Äîsecrets never touch the disk.

### Command Categories

| Category | Commands | Description |
|----------|----------|-------------|
| **Primary (AI-Safe)** | `run`, `set`, `edit`, `inspect`, `has` | Safe for AI assistants‚Äînever expose secret values |
| **Setup** | `init`, `encrypt`, `status`, `skill` | Configuration and encryption |
| **Deployment** | `push`, `check` | CI/CD and cloud deployment |
| **Debugging** | `resolve`, `trace` | Debug secret filtering and routing |

### Global Options

| Option | Description |
|--------|-------------|
| `-e, --env <env>` | Environment: `development` or `production` (default: `development`) |
| `-r, --root <dir>` | Root directory (default: current directory) |
| `-h, --help` | Show help message |
| `-v, --version` | Show version number |

---

## run

Run a command with secrets injected as environment variables. **This is the primary way to use secrets.** Secrets are decrypted to memory only‚Äîthey never touch the disk.

```bash
# Run with development secrets (default)
hush run -- npm start

# Run with production secrets
hush run -e production -- npm build
hush run -e prod -- npm build

# Run with secrets filtered for a specific target
hush run -t api -- wrangler dev
hush run --target web -- npm start
```

### Options

| Option | Description |
|--------|-------------|
| `-e, --env <env>` | Environment: `development` or `production` |
| `-t, --target <name>` | Filter secrets for a specific target from `hush.yaml` |
| `-- <command>` | The command to run (everything after `--`) |

### How It Works

1. Decrypts secrets to memory (never written to disk)
2. Merges shared ‚Üí environment ‚Üí local secrets
3. Optionally filters by target (`-t`)
4. Spawns the child process with secrets as environment variables
5. Inherits stdin/stdout/stderr for full interactivity

### Examples

```bash
# Local development
hush run -- npm run dev

# Production build
hush run -e prod -- npm run build

# Wrangler with API secrets only
hush run -t api -- wrangler dev

# Docker with secrets
hush run -- docker compose up

# Any command that needs secrets
hush run -- node scripts/migrate.js
```

<Aside type="tip">
Use `-t` (target) to filter secrets. For example, your frontend might only need `NEXT_PUBLIC_*` variables, while your API needs database credentials.
</Aside>

---

## set

Set a secret interactively. The AI assistant invokes this command, and the user enters the value‚Äî**the AI never sees the secret**.

```bash
# Set a secret in shared (.env.encrypted)
hush set DATABASE_URL

# Set a secret in a specific environment
hush set API_KEY -e production
hush set DEBUG -e development

# Set a secret in local overrides (.env.local.encrypted)
hush set MY_OVERRIDE --local
```

### Options

| Option | Description |
|--------|-------------|
| `-e, --env <env>` | Target environment file (default: shared `.env.encrypted`) |
| `--local` | Set in `.env.local.encrypted` (personal overrides, not committed) |

### How It Works

1. Prompts for the value with hidden input (like a password)
2. Decrypts the target file
3. Sets or updates the key
4. Re-encrypts the file
5. Confirms success with character count (no value shown)

### Example Output

```
$ hush set DATABASE_URL
Enter value for DATABASE_URL: ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢
‚úì DATABASE_URL set in .env.encrypted (45 chars)
```

<Aside type="tip">
This is the recommended way for AI assistants to help add secrets. The AI can suggest `hush set DATABASE_URL` and guide the user, without ever seeing the actual value.
</Aside>

---

## edit

Edit secrets in your `$EDITOR`. Opens the decrypted file, and re-encrypts on save.

```bash
# Edit shared secrets
hush edit

# Edit environment-specific secrets
hush edit development
hush edit production
hush edit dev
hush edit prod

# Edit local overrides
hush edit local
```

### How It Works

1. Decrypts the target file to a temporary location
2. Opens in `$EDITOR` (vim, nano, code --wait, etc.)
3. Re-encrypts when you save and close
4. Deletes the temporary file

<Aside type="caution">
Make sure your `$EDITOR` environment variable is set. For VS Code, use `code --wait` so hush knows when you're done editing.
</Aside>

---

## init

Generate a `hush.yaml` configuration file with auto-detected targets.

```bash
hush init
```

This command scans your monorepo for packages with `package.json` files and creates an initial configuration.

### Example Output

```yaml
# hush.yaml (generated)
sources:
  shared: .env
  development: .env.development
  production: .env.production

targets:
  - name: root
    path: .
    format: dotenv
  - name: app
    path: ./packages/app
    format: dotenv
  - name: api
    path: ./packages/api
    format: wrangler
```

---

## encrypt

Encrypt source `.env` files to `.env.encrypted` files.

```bash
hush encrypt
```

### What Gets Encrypted

Based on your `hush.yaml` sources configuration:
- `.env` ‚Üí `.env.encrypted`
- `.env.development` ‚Üí `.env.development.encrypted`
- `.env.production` ‚Üí `.env.production.encrypted`

<Aside type="tip">
Encrypted files are safe to commit to git. Add them to version control as your source of truth.
</Aside>

---

## inspect

List all variables with masked values. **Safe for AI agents**.

```bash
hush inspect
hush inspect -e production
```

### Example Output

```
Secrets for development:

  DATABASE_URL      = post****************... (45 chars)
  STRIPE_SECRET_KEY = sk_t****************... (32 chars)
  API_KEY           = (not set)

Total: 3 variables

Target distribution:

  root (.) - 3 vars
  app (./app/) - 1 vars
    include: EXPO_PUBLIC_*
  api (./api/) - 2 vars
    exclude: EXPO_PUBLIC_*
```

This lets AI agents reason about your configuration without seeing actual secrets.

---

## has

Check if a specific secret exists. Returns exit code `0` if set, `1` if not.

```bash
# Check if a variable is set
hush has DATABASE_URL

# Quiet mode (no output, just exit code)
hush has API_KEY -q

# Use in scripts
hush has DATABASE_URL -q && echo "DB configured"
```

### Options

| Option | Description |
|--------|-------------|
| `-q, --quiet` | Suppress output, only return exit code |

### Example Output

```
DATABASE_URL is set (45 chars)
```

Or if not set:

```
DATABASE_URL not found
```

---

## push

Push production secrets to Cloudflare Workers.

```bash
# Push secrets
hush push

# Preview without pushing
hush push --dry-run

# Detailed preview showing each variable
hush push --dry-run --verbose
```

### Options

| Option | Description |
|--------|-------------|
| `--dry-run` | Preview what would be pushed without making changes |
| `--verbose` | Show detailed output (with `--dry-run`) |

### How It Works

1. Finds targets with `format: wrangler` and a `wrangler.toml` file
2. Reads the worker name from `wrangler.toml`
3. Uploads production secrets using `wrangler secret put`

<Aside type="note">
Requires the `wrangler` CLI to be installed and authenticated.
</Aside>

---

## status

Show configuration and file status.

```bash
hush status
```

### Example Output

```
Hush Status

Configuration: hush.yaml

Sources:
  shared: .env (encrypted: yes, modified: no)
  development: .env.development (encrypted: yes, modified: no)
  production: .env.production (encrypted: yes, modified: no)

Targets:
  root (.)
    format: dotenv
  app (./packages/app)
    format: dotenv
    include: EXPO_PUBLIC_*
  api (./packages/api)
    format: wrangler
    exclude: EXPO_PUBLIC_*

All encrypted files are up to date.
```

---

## check

Verify encrypted files are in sync with source files. Useful for pre-commit hooks.

```bash
# Basic check
hush check

# Warn but don't fail
hush check --warn

# JSON output for CI
hush check --json

# Only check git-modified files
hush check --only-changed
```

### Options

| Option | Description |
|--------|-------------|
| `--warn` | Warn on drift but exit 0 |
| `--json` | Output machine-readable JSON |
| `--quiet` | Suppress output |
| `--only-changed` | Only check files modified in git |
| `--require-source` | Fail if source file is missing |

### Exit Codes

| Code | Meaning |
|------|---------|
| `0` | All in sync |
| `1` | Drift detected (run `hush encrypt`) |
| `2` | Config error |
| `3` | Runtime error (sops missing, decrypt failed) |

### Pre-commit Hook

```bash
# .husky/pre-commit
npx hush check || exit 1
```

Bypass with: `HUSH_SKIP_CHECK=1 git commit -m "message"`

---

## resolve

Show what variables a specific target will receive, with filtering details. **Essential for debugging why a variable is missing from a target.**

```bash
# Check what variables api-workers receives
hush resolve api-workers

# Check with production environment
hush resolve api-workers -e production
```

### Options

| Option | Description |
|--------|-------------|
| `-e, --env <env>` | Environment: `development` or `production` |

### Example Output

```
Target: api-workers
Path: ./api/
Format: wrangler (.dev.vars)
Environment: development

‚úÖ INCLUDED VARIABLES (11):
  SUPABASE_URL               (source: .env.development)
  STRIPE_SECRET_KEY          (source: .env)
  R2_ACCESS_KEY_ID           (source: .env)
  ...

üö´ EXCLUDED VARIABLES (8):
  EXPO_PUBLIC_API_URL        (matches: EXPO_PUBLIC_*)
  FASTLANE_APPLE_ID          (matches: FASTLANE_*)
  ASC_KEY_ID                 (matches: ASC_*)
  ...
```

<Aside type="tip">
When a variable is missing, check the üö´ EXCLUDED section to see which pattern filtered it out. This immediately tells you whether to adjust your `include`/`exclude` patterns.
</Aside>

---

## trace

Trace a specific variable through all sources and targets. **Use this to understand why a variable appears in some places but not others.**

```bash
# Trace a variable
hush trace DATABASE_URL

# Trace with production environment
hush trace STRIPE_SECRET_KEY -e production
```

### Options

| Option | Description |
|--------|-------------|
| `-e, --env <env>` | Environment: `development` or `production` |

### Example Output

```
Tracing variable: SUPABASE_URL

Source Status:
  .env             : ‚ùå Not found
  .env.development : ‚úÖ Present
  .env.production  : ‚úÖ Present
  .env.local       : (file not found)

Target Disposition (Environment: development):
  [root]        : ‚úÖ Included
  [app]         : üö´ Not included (not in include: EXPO_PUBLIC_*)
  [api]         : ‚úÖ Included
  [api-workers] : ‚úÖ Included
  [landing]     : üö´ Not included (not in include: EXPO_PUBLIC_SUPABASE_*)
```

<Aside type="tip">
This shows the complete picture: which source files have the variable, and which targets will receive it (or exclude it, and why).
</Aside>

---

## skill

Install the Claude Code / OpenCode skill for AI-safe secrets management.

```bash
# Interactive: choose global or local
hush skill

# Install globally (all projects)
hush skill --global

# Install locally (this project only)
hush skill --local
```

### Options

| Option | Description |
|--------|-------------|
| `--global` | Install to `~/.claude/skills/` |
| `--local` | Install to `./.claude/skills/` |

### Global vs Local

- **Global** - Works across all your projects. Recommended for personal use.
- **Local** - Bundled with the project. Recommended for teams (commit `.claude/` to git).

<Aside type="tip">
Once installed, the skill teaches AI assistants to use `hush inspect` and `hush has` instead of reading `.env` files directly.
</Aside>

---

## list (Caution)

<Aside type="caution">
This command shows actual secret values. Use `hush inspect` for AI-safe output.
</Aside>

List all variables with their actual values.

```bash
hush list
hush list -e production
```

<Aside type="danger">
This command shows actual secret values in the terminal. Use `hush inspect` instead when working with AI assistants.
</Aside>
