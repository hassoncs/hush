---
title: File Reference
description: Complete reference for all files used by Hush.
---

import { Aside, FileTree } from '@astrojs/starlight/components';

This page documents all files that Hush creates, reads, and manages.

<Aside type="tip">
With Hush's "encrypted at rest" model, secrets are **never written to disk** during normal use. The `hush run` command decrypts secrets to memory and injects them as environment variables.
</Aside>

## File Overview

| File | Committed | Purpose |
|------|-----------|---------|
| `hush.yaml` | Yes | Configuration file |
| `.sops.yaml` | Yes | SOPS encryption config |
| `.env.encrypted` | Yes | Encrypted shared secrets |
| `.env.development.encrypted` | Yes | Encrypted development secrets |
| `.env.production.encrypted` | Yes | Encrypted production secrets |
| `.env.local.encrypted` | **No** | Encrypted personal overrides (not committed) |

## Configuration Files

### hush.yaml

The main configuration file. Defines sources and targets.

```yaml
sources:
  shared: .env
  development: .env.development
  production: .env.production

targets:
  - name: root
    path: .
    format: dotenv
```

**Location:** Repository root  
**Commit:** Yes  
**Created by:** `hush init` or manually

### .sops.yaml

SOPS configuration file. Defines which keys can encrypt/decrypt.

```yaml
creation_rules:
  - encrypted_regex: '.*'
    age: age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**Location:** Repository root  
**Commit:** Yes  
**Created by:** Manually (SOPS requirement)

## Source Files (For Initial Setup Only)

These plaintext `.env` files are only used during **initial setup** when you first encrypt your secrets. After running `hush encrypt`, you can delete them.

<Aside type="caution">
**Never commit plaintext `.env` files.** After initial encryption, use `hush edit` to modify secrets or `hush set <KEY>` to add new ones.
</Aside>

### .env

Shared variables used across all environments.

```bash
DATABASE_URL=postgres://user:pass@host/db
STRIPE_SECRET_KEY=sk_xxx
EXPO_PUBLIC_API_URL=${API_BASE}/v1
```

### .env.development

Development-specific overrides.

```bash
API_BASE=http://localhost:8787
DEBUG=true
```

### .env.production

Production-specific overrides.

```bash
API_BASE=https://api.example.com
DEBUG=false
```

### .env.local (deprecated)

In older versions, `.env.local` was unencrypted. Now, personal overrides should use:

```bash
# Add a local override (encrypted)
hush set MY_VAR --local

# Edit all local overrides
hush edit local
```

This creates `.env.local.encrypted` which keeps your personal overrides encrypted too.

<Aside type="tip">
Use `hush set <KEY> --local` for personal development settings that shouldn't be shared with the team.
</Aside>

## Encrypted Files

These are the SOPS-encrypted versions of your secrets. **Safe to commit** (except `.env.local.encrypted`).

### .env.encrypted

Encrypted shared secrets used across all environments.

**Commit:** Yes

### .env.development.encrypted

Encrypted development-specific secrets.

**Commit:** Yes

### .env.production.encrypted

Encrypted production-specific secrets.

**Commit:** Yes

### .env.local.encrypted

Encrypted personal overrides for your machine only.

**Commit:** No (add to `.gitignore`)

---

**Created by:** `hush encrypt`, `hush set`, `hush edit`  
**Used by:** `hush run`, `hush inspect`, `hush has`, `hush edit`

## Plaintext Files (Never Generated)

<Aside type="note">
Hush's "encrypted at rest" model means plaintext `.env` files are **never written to disk** during normal operation. With `hush run`, secrets are decrypted to memory and injected as environment variables—they never touch the filesystem.
</Aside>

The following files should **not exist** in a properly configured Hush project:

| File | Why It Shouldn't Exist |
|------|----------------------|
| `.env.development` / `.env.production` | Use `hush run` instead |
| `.dev.vars` | Use `hush run` or `hush push` for Cloudflare Workers |
| `.env.*.json` / `.env.*.sh` / `.env.*.yaml` | Use `hush run` to inject secrets |

If you see these files, they were created manually or by legacy tooling. You can safely delete them—Hush doesn't need them.

## Typical Project Structure

With the "encrypted at rest" model, your project should look like this:

<FileTree>
- .sops.yaml                    # SOPS config (committed)
- hush.yaml                     # Hush config (committed)
- .env.encrypted                # Encrypted shared (committed)
- .env.development.encrypted    # Encrypted dev (committed)
- .env.production.encrypted     # Encrypted prod (committed)
- .env.local.encrypted          # Personal overrides (NOT committed)
- packages/
  - app/
    - package.json
  - api/
    - package.json
    - wrangler.toml
</FileTree>

**Note:** No plaintext `.env` files! Secrets are decrypted to memory by `hush run`.

## Recommended .gitignore

Add these entries to your `.gitignore`:

```bash
# Hush - Plaintext env files (should not exist after initial setup)
.env
.env.development
.env.production
.env.local

# Hush - Personal encrypted overrides (not shared)
.env.local.encrypted

# Hush - Plaintext files (should not exist)
.env.*.json
.env.*.sh
.env.*.yaml
.dev.vars
*/.env.*
*/.dev.vars

# Keep encrypted files (these ARE committed)
!.env.encrypted
!.env.development.encrypted
!.env.production.encrypted
```

## Age Key File

SOPS uses age for encryption. Your private key is stored at:

```
~/.config/sops/age/key.txt
```

<Aside type="danger">
**Never commit your age private key.** Store it securely and share it with team members through a secure channel.
</Aside>

### Key Format

```
# created: 2024-01-01T00:00:00Z
# public key: age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
AGE-SECRET-KEY-1XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
```

### Multiple Keys

For team environments, each member has their own key. All public keys are listed in `.sops.yaml`:

```yaml
creation_rules:
  - encrypted_regex: '.*'
    age: >-
      age1alice...,
      age1bob...,
      age1charlie...
```

Anyone with any of these private keys can decrypt the secrets.
