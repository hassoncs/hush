---
title: Getting Started
description: Install Hush and encrypt your first secrets in under 5 minutes.
---

import { Steps, Tabs, TabItem, Aside } from '@astrojs/starlight/components';

Get up and running with Hush in just a few minutes.

## Prerequisites

Hush requires **Node.js 18+** and delegates encryption to standard tools.

1.  **[SOPS](https://github.com/getsops/sops)** - The standard for secret operations
2.  **[age](https://github.com/FiloSottile/age)** - Modern, simple key management
3.  **[direnv](https://direnv.net/)** - Automatic environment loading (for per-project keys)

<Tabs>
  <TabItem label="macOS">
    ```bash
    brew install sops age direnv
    
    # Add direnv hook to your shell (add to ~/.zshrc or ~/.bashrc)
    echo 'eval "$(direnv hook zsh)"' >> ~/.zshrc   # for zsh
    # or: echo 'eval "$(direnv hook bash)"' >> ~/.bashrc   # for bash
    
    # Reload your shell
    source ~/.zshrc
    ```
  </TabItem>
  <TabItem label="Linux">
    ```bash
    # SOPS
    curl -LO https://github.com/getsops/sops/releases/download/v3.8.1/sops-v3.8.1.linux.amd64
    sudo mv sops-v3.8.1.linux.amd64 /usr/local/bin/sops
    sudo chmod +x /usr/local/bin/sops

    # age
    curl -LO https://github.com/FiloSottile/age/releases/download/v1.1.1/age-v1.1.1-linux-amd64.tar.gz
    tar xzf age-v1.1.1-linux-amd64.tar.gz
    sudo mv age/age /usr/local/bin/
    
    # direnv
    curl -sfL https://direnv.net/install.sh | bash
    echo 'eval "$(direnv hook bash)"' >> ~/.bashrc
    source ~/.bashrc
    ```
  </TabItem>
  <TabItem label="Windows">
    ```powershell
    # Using scoop
    scoop install sops age direnv
    
    # Or using chocolatey
    choco install sops age direnv
    ```
    *Note: Hush fully supports Windows (PowerShell/CMD). For direnv on Windows, see [direnv.net](https://direnv.net/) for setup instructions.*
  </TabItem>
</Tabs>

<Aside type="note">
**Why direnv?** Hush uses per-project encryption keys stored at `~/.config/sops/age/keys/{project}.txt`. SOPS needs the `SOPS_AGE_KEY_FILE` environment variable to find them. direnv automatically loads this when you `cd` into the project.
</Aside>

## Installation

<Tabs>
  <TabItem label="pnpm">
    ```bash
    pnpm add -D @chriscode/hush
    ```
  </TabItem>
  <TabItem label="npm">
    ```bash
    npm install -D @chriscode/hush
    ```
  </TabItem>
  <TabItem label="yarn">
    ```bash
    yarn add -D @chriscode/hush
    ```
  </TabItem>
</Tabs>

## Setup

<Steps>

1. **Generate an age key**

   Create a key pair for encrypting your secrets:

   ```bash
   mkdir -p ~/.config/sops/age
   age-keygen -o ~/.config/sops/age/key.txt
   ```

   This creates a private key at `~/.config/sops/age/key.txt`. The public key is printed to the console.

2. **Create `.sops.yaml`**

   In your repository root, create a SOPS configuration file:

   ```yaml
   # .sops.yaml
   creation_rules:
     - encrypted_regex: '.*'
       age: age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
   ```

   Replace the `age:` value with your public key from step 1.

3. **Initialize Hush**

   Run the init command to create `hush.yaml`:

   ```bash
   npx hush init
   ```

   This auto-detects packages in your monorepo and creates a configuration file.

4. **Create your source files**

   ```bash
   # .hush (shared across environments)
   DATABASE_URL=postgres://localhost/mydb
   STRIPE_SECRET_KEY=sk_test_xxx
   EXPO_PUBLIC_API_URL=${API_BASE}/v1

   # .hush.development
   API_BASE=http://localhost:8787

   # .hush.production
   API_BASE=https://api.example.com
   ```

5. **Encrypt**

   ```bash
   npx hush encrypt
   ```

   This creates encrypted versions of your source files (`.hush.encrypted`, etc.) that are safe to commit.

6. **Set up direnv for key loading**

   Create a `.envrc` file in your project root:

   ```bash
   # .envrc
   export SOPS_AGE_KEY_FILE="$HOME/.config/sops/age/keys/YOUR_PROJECT.txt"
   ```

   Replace `YOUR_PROJECT` with your project identifier (visible in `npx hush status` under "Local key").

   Then allow direnv to load it:

   ```bash
   direnv allow
   ```

   <Aside type="tip">
   For team projects, commit `.envrc` to git so everyone gets the correct key path automatically.
   </Aside>

7. **Run with secrets**

   ```bash
   npx hush run -- npm start
   ```

   This decrypts secrets to memory and runs your command with them as environment variables. Secrets never touch the disk!

</Steps>

## Verify Your Setup

Check that everything is configured correctly:

```bash
npx hush status
```

This shows your configuration, encrypted files, and target distribution.

## Troubleshooting

### "no identity matched any of the recipients"

This is the most common error. It means SOPS can't find your decryption key.

**Most likely cause:** direnv isn't loaded.

```bash
# 1. Check that direnv is allowed
direnv allow

# 2. Verify the environment variable is set
echo $SOPS_AGE_KEY_FILE   # Should show the path to your key file

# 3. Test decryption
npx hush status
npx hush inspect
```

If `SOPS_AGE_KEY_FILE` is empty, make sure you've:
1. Installed direnv and added the hook to your shell
2. Reloaded your shell (`source ~/.zshrc` or open a new terminal)
3. Run `direnv allow` in the project directory

### "age key not found"

The key file doesn't exist. Either:
- Run `npx hush keys setup` to pull from 1Password
- Get the key from a team member and save it to the path shown in `npx hush status`

## Next Steps

- Learn about [Configuration](/guides/configuration/) to customize your setup
- Understand [Monorepo Patterns](/guides/monorepos/) for routing secrets
- Explore [AI-Native Workflow](/guides/ai-native/) for working with AI assistants
- See the full [Command Reference](/reference/commands/)

<Aside type="tip">
Add `.hush*.encrypted` files to git. With `hush run`, plaintext files are never createdâ€”secrets only exist in memory when your program runs.
</Aside>
